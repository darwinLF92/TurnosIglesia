{% extends "aplicacion/base.html" %}
{% load static %}

{% block content %}

<style>
    .password-card {
        max-width: 650px;
        margin: auto;
        padding: 30px;
        border-radius: 18px;
        background: #fff;
        box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        border: none;
    }
    .title-section {
        font-size: 1.6rem;
        font-weight: 700;
        margin-bottom: 15px;
    }
    .form-label {
        font-weight: 600;
        margin-bottom: 6px;
    }
    .input-group-text {
        background: #fff;
        border-left: none !important;
        border-radius: 0 12px 12px 0;
        cursor: pointer;
        border-color: #4a5568;
    }
    .input-group .form-control {
        border-right: none !important;
        height: 46px;
        border-radius: 12px 0 0 12px;
        border-color: #4a5568;
    }
    .input-group .input-group-text {
        border-radius: 0 12px 12px 0;
    }
    .password-info {
        font-size: 0.85rem;
        color: #4a5568;
        margin-top: 10px;
    }
    .btn-submit {
        height: 50px;
        font-size: 1.1rem;
        border-radius: 10px;
        font-weight: 600;
    }
</style>

<div class="container py-4">

    <div class="password-card">

        <h3 class="title-section"><i class="bx bx-lock-alt"></i> Cambiar contraseña</h3>

        <form method="POST">
            {% csrf_token %}

            <!-- Campo Contraseña Actual -->
            <div class="mb-3">
                <label class="form-label">Contraseña actual</label>

                <div class="input-group">
                    <input 
                        type="password"
                        name="old_password"
                        class="form-control"
                        id="id_old_password"
                        required
                    >
                    <span class="input-group-text toggle-password">
                        <i class='bx bx-low-vision'></i>
                    </span>
                </div>
            </div>

            <!-- Campo Nueva Contraseña -->
            <div class="mb-3">
                <label class="form-label">Nueva contraseña</label>

                <div class="input-group">
                    <input 
                        type="password"
                        name="new_password1"
                        class="form-control"
                        id="id_new_password1"
                        required
                    >
                    <span class="input-group-text toggle-password">
                        <i class='bx bx-low-vision'></i>
                    </span>
                </div>


                <ul class="password-info">
                    <li>Debe tener al menos 8 caracteres.</li>
                    <li>No puede ser similar a tus datos personales.</li>
                    <li>No puede ser una contraseña común.</li>
                    <li>No puede ser completamente numérica.</li>
                </ul>
            </div>

            <!-- Campo Confirmar Contraseña -->
            <div class="mb-3">
                <label class="form-label">Confirmar nueva contraseña</label>

                <div class="input-group">
                    <input 
                        type="password"
                        name="new_password2"
                        class="form-control"
                        id="id_new_password2"
                        required
                    >
                    <span class="input-group-text toggle-password">
                        <i class='bx bx-low-vision'></i>
                    </span>
                </div>

            </div>

            <button class="btn btn-primary btn-submit w-100">
                Actualizar contraseña
            </button>

        </form>

    </div>

</div>

<!-- SCRIPT PARA OJITOS -->
<script>
document.addEventListener("DOMContentLoaded", function () {

    document.querySelectorAll(".toggle-password").forEach(btn => {
        btn.addEventListener("click", function () {
            const input = this.parentElement.querySelector("input");
            const icon = this.querySelector("i");

            if (input.type === "password") {
                input.type = "text";
                icon.classList.remove("bx-low-vision");
                icon.classList.add("bx-show");
            } else {
                input.type = "password";
                icon.classList.remove("bx-show");
                icon.classList.add("bx-low-vision");
            }
        });
    });

});
</script>

{% endblock %}
